.lesson
  .row
    .col-md-7.floatright
      .box
        %h2.title
          -if @lesson.skill
            = @lesson.skill.title
        .container
          %a{href: user_path(@lesson.skill.user), class:"circle-overlay"}
            = image_tag @lesson.skill.user.picture
          %h4.instructor
            = link_to @lesson.skill.user.name, user_path(@lesson.skill.user)
        %hr.div-line
        %h4 Messages
        .messages
          =render "/conversations/reply", conversation: @lesson.conversation
          -@lesson.conversation.messages.each do |message|
            =render "/conversations/message", message: message

    .col-md-5
      .box
        .skill-image-full
          -if @lesson.skill
            = image_tag @lesson.skill.picture
      .box
        %h3 Status
        %br
        -if current_user == @lesson.teacher
          -if !@lesson.approved && !@lesson.ignored
            = link_to "Accept", approve_lessons_path(id: @lesson.id), class: "button btn btn-custom"
            = link_to "Ignore", ignore_lessons_path(id: @lesson.id), class: "button btn btn-custom"
          -elsif !@lesson.completed
            %h4 Accepted!
            = link_to "Add review", skill_path(@lesson.skill), class: "button btn btn-custom"
        -else
          -if !@lesson.approved && !@lesson.ignored
            .pending-approval
              Pending Response
          -elsif !@lesson.approved && @lesson.ignored
            .denied
              Not Accepted
          -elsif @lesson.approved
            .accepted
              Accepted!